"use strict";(self.webpackChunkFLIGHT_TRACKER=self.webpackChunkFLIGHT_TRACKER||[]).push([[668,845,723],{28991:function(t,e,r){r.d(e,{r:function(){return f}});var n,o,a=r(72791),l=["title","titleId"];function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i.apply(this,arguments)}function c(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function u(t,e){var r=t.title,u=t.titleId,f=c(t,l);return a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:e,"aria-labelledby":u},f),r?a.createElement("title",{id:u},r):null,n||(n=a.createElement("path",{d:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"})),o||(o=a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})))}var f=a.forwardRef(u);e.Z=r.p+"static/media/flight-24px.c4c3dc8440f2c64eb4e9539b823d244a.svg"},1755:function(t,e,r){r.d(e,{r:function(){return f}});var n,o,a=r(72791),l=["title","titleId"];function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i.apply(this,arguments)}function c(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function u(t,e){var r=t.title,u=t.titleId,f=c(t,l);return a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:24,viewBox:"0 0 24 24",width:24,ref:e,"aria-labelledby":u},f),r?a.createElement("title",{id:u},r):null,n||(n=a.createElement("g",null,a.createElement("rect",{fill:"none",height:24,width:24}))),o||(o=a.createElement("g",null,a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M2.5,19h19v2h-19V19z M19.34,15.85c0.8,0.21,1.62-0.26,1.84-1.06c0.21-0.8-0.26-1.62-1.06-1.84l-5.31-1.42l-2.76-9.02 L10.12,2v8.28L5.15,8.95L4.22,6.63L2.77,6.24v5.17L19.34,15.85z"}))))))}var f=a.forwardRef(u);e.Z=r.p+"static/media/flight_land-24px.845497f64252497af730dd1ec177b552.svg"},40783:function(t,e,r){r.d(e,{r:function(){return f}});var n,o,a=r(72791),l=["title","titleId"];function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i.apply(this,arguments)}function c(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function u(t,e){var r=t.title,u=t.titleId,f=c(t,l);return a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:24,viewBox:"0 0 24 24",width:24,ref:e,"aria-labelledby":u},f),r?a.createElement("title",{id:u},r):null,n||(n=a.createElement("g",null,a.createElement("rect",{fill:"none",height:24,width:24}))),o||(o=a.createElement("g",null,a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M2.5,19h19v2h-19V19z M22.07,9.64c-0.21-0.8-1.04-1.28-1.84-1.06L14.92,10l-6.9-6.43L6.09,4.08l4.14,7.17l-4.97,1.33 l-1.97-1.54l-1.45,0.39l2.59,4.49c0,0,7.12-1.9,16.57-4.43C21.81,11.26,22.28,10.44,22.07,9.64z"}))))))}var f=a.forwardRef(u);e.Z=r.p+"static/media/flight_takeoff-24px.44ad69ebd91263794b47838f8f132faa.svg"},95668:function(t,e,r){r.r(e),r.d(e,{aircraftLayerId:function(){return g}});var n=r(4942),o=r(37762),a=r(70885),l=r(72791),i=r(93410),c=r(85737),u=r(13967),f=r(51845),s=r(80184),g="aircrafts";e.default=function(t){var e=(0,u.Z)(),r=(0,l.useState)(void 0),d=(0,a.Z)(r,2),p=d[0],v=d[1],m=(0,l.useState)([]),h=(0,a.Z)(m,2),y=h[0],b=h[1],w=(0,l.useContext)(c.yk).getService("GeospatialService"),x=(0,l.useRef)("");(0,l.useEffect)((function(){if(w){var t=w.onPathPredictionUpdated("AircraftLayer",O);x.current=t}return function(){if(w){w.stopPathPrediction();var t=x.current;w.offPathPredictionUpdated(t)}}}),[]),(0,l.useEffect)((function(){E(y).then((function(e){v(e),w&&(t.stateVectors.states.length>1e3?w.stopPathPrediction():w.restartPathPrediction(t.stateVectors))}))}),[t.stateVectors]),(0,l.useEffect)((function(){E(y).then((function(t){v(t)}))}),[y]);var O=function(t){b(t)},E=function(r){return new Promise((function(a,l){var i,c={type:"FeatureCollection",features:[]},u=(0,o.Z)(t.stateVectors.states);try{for(u.s();!(i=u.n()).done;){var s,g=i.value;if(g.latitude&&g.longitude){var d=t.stateVectors.states.indexOf(g),p=!1;t.selectedAircraft&&(p=g.icao24===t.selectedAircraft.icao24);var v=g.callsign?g.callsign:g.icao24,m=g.geo_altitude;(null===m||m<0)&&(m=g.baro_altitude),(null===m||m<0)&&(m=0);var h=g.velocity?3.6*g.velocity:-1,y=g.true_track?g.true_track:0,b=g.vertical_rate?g.vertical_rate:0,w=g.on_ground,x=(0,f.getColor)(m);w&&(x=e.palette.text.secondary),p&&(x=e.palette.primary.main);var O=(s={},(0,n.Z)(s,"iconName",(0,f.getIconName)(w,b,m,y)),(0,n.Z)(s,"rotation",(0,f.getRotation)(y,b,m)),(0,n.Z)(s,"color",x),(0,n.Z)(s,"isSelected",p),(0,n.Z)(s,"icao24",g.icao24),(0,n.Z)(s,"callsign",v),(0,n.Z)(s,"altitude",(0,f.getFormattedValue)(m,1)+" m"),(0,n.Z)(s,"velocity",(0,f.getFormattedValue)(h,1)+" km/h"),s),E=[g.longitude,g.latitude];if(r.length>0){var j=r.find((function(t){return null!==t.properties&&t.properties.icao24===g.icao24}));j&&(E=j.geometry.coordinates)}var P={type:"Point",coordinates:E},I={type:"Feature",id:"".concat(d,".").concat(g.icao24),geometry:P,properties:O};c.features.push(I)}}}catch(k){u.e(k)}finally{u.f()}a(c)}))},j=function(){var r="",n=["format",["get","callsign"],{"font-scale":1},"\n",{},["get","altitude"],{"font-scale":.75,"text-color":e.palette.text.primary},"\n",{},["get","velocity"],{"font-scale":.75,"text-color":e.palette.text.primary}];return t.zoom&&t.zoom>7&&(r=["get","callsign"]),t.zoom&&t.zoom>9&&(r=n),r};return t.stateVectors.states?(0,s.jsx)(i.Hw,{type:"geojson",data:p,children:(0,s.jsx)(i.mh,{id:g,type:"symbol",source:"geojson",layout:function(){var e=!1;t.zoom&&t.zoom>7&&(e=!0);var r=1;return t.zoom&&t.zoom>7&&(r=1.3),t.zoom&&t.zoom>9&&(r=1.6),{"icon-image":["get","iconName"],"icon-allow-overlap":!0,"icon-rotate":["get","rotation"],"icon-size":r,"text-field":e?j():"","text-optional":!0,"text-allow-overlap":!0,"text-anchor":e?"top":"center","text-offset":e?[0,1]:[0,0]}}(),paint:{"icon-color":["get","color"],"text-color":["get","color"],"text-halo-width":2,"text-halo-color":e.palette.background.default,"text-halo-blur":2}})}):null}},92723:function(t,e,r){r.r(e),r.d(e,{getFormattedValue:function(){return i},getIconName:function(){return c},getIcon:function(){return u},getRotation:function(){return f},getColor:function(){return s},getStatusText:function(){return g}});var n=r(28991),o=r(1755),a=r(40783),l=1e3,i=function(t,e){return new Intl.NumberFormat("de-CH",{style:"decimal",useGrouping:!1,maximumFractionDigits:e}).format(t)},c=function(t,e,r,n){return t||r<=0?"flight-icon":e>0&&r<l?n<180?"flight-takeoff-icon":"flight-takeoff-flipped-icon":e<0&&r<l?n<180?"flight-land-icon":"flight-land-flipped-icon":"flight-icon"},u=function(t,e,r){return t||r<=0?n.r:e>0&&r<l?a.r:e<0&&r<l?o.r:n.r},f=function(t,e,r){return e>0&&r<l||e<0&&r<l?0:t},s=function(t){var e=t/13e3*100;e>100&&(e=100),e<0&&(e=0);var r,n;return e<50?(r=255,n=Math.round(5.1*e)):(n=255,r=Math.round(510-5.1*e)),"#"+("000000"+(65536*r+256*n+0).toString(16)).slice(-6)},g=function(t,e,r){return t||r<=0?"On Ground":e>0&&r<l?"Taking off":e<0&&r<l?"Landing":"On Track"}},51845:function(t,e,r){r.r(e),r.d(e,{getColor:function(){return n.getColor},getFormattedValue:function(){return n.getFormattedValue},getIcon:function(){return n.getIcon},getIconName:function(){return n.getIconName},getRotation:function(){return n.getRotation},getStatusText:function(){return n.getStatusText}});var n=r(92723)}}]);
//# sourceMappingURL=668.1ced7373.chunk.js.map